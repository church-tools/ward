@use "color";
@use "shadow";
@use "animation";
@use "layout";
@use 'sass:map';
@use 'sass:color' as sassColor;

$background-color: #f6f6f6;
$background-color-dark: #323232;
$hover-background-color: #ffffff;
$hover-background-color-dark: #373737;

$background-transparent-color: rgba(#ffffff, 0.6);
$background-transparent-color-dark: rgba(#484848, 0.333);
$hover-background-transparent-color: rgba(#ffffff, 0.75);
$hover-background-transparent-color-dark: rgba(#565656, 0.333);

$active-background-transparent-color: rgba(#ffffff, 0.5);
$active-background-transparent-color-dark: rgba(#484848, 0.25);

$border-radius-round: 999pt;
$border-radius: 0.5rem;
$border-radius-sm: 0.25rem;
$border-radius-lg: 0.75rem;

$divider-width: 1px;
$divider-style: solid;
$divider-color: #c5c5c5;
$divider-color-dark: #525252;
$divider: $divider-width $divider-style $divider-color;

$acrylic-blur: blur(10px);
$acrylic-noise: url("data:image/webp;base64,UklGRpADAABXRUJQVlA4WAoAAAAQAAAAMQAAMQAAQUxQSAoAAAABB1CgiAhERP8DVlA4IGADAADwDgCdASoyADIAPikUiEMhoSERBMwYAoS0gAkDrvEwXslzF5PfKP2g/u++h9F0Dp/3GUuXFjd2iRSNN10fEU9ZCtPlNl1bDpaXJGSRB2WHbpuuDeAw1Zqj9uMpbHKHFfc9ZC77QOyuZRtcEjTCvGR9s6f9zCjV8ws6ayXoU46mAAD+/+nkINBYP8/pOIhg0cLI4nFYZWgrIPEdzBROVmP96Kpv0n7wmOyZtmIHZU2g6vBRazQaEVdxV0uFViYs+KAM2lU/AWNNZK8A1oeqpADTcyW8JPmx7Zl7GfImQc/2PpeRKRnVshc99zN4eR8kWa/ixqN3KmlUVu6uHWSUi1McaPEkCjLzFQwgBubiyLSTldeYbdzxNdcqeGaoZaz7T5zrhArMcs+F6EO+E1wI+miHc1+BlcDdDn9sMSyZj+5ZOo74JUOHifTZ38dXAZO0lS5ZiwY3YOulW3LSb3kueT1S7B4/zq426b162JpCg1G3F0TgoSy8tW+ZJWDB/nCVLRH4Qvjvz9FJYJcvBoGEcsLDShx1xP9kkrF2aOP4JRjxBjUcCV5GXoGdLhERw0xlTqEuNRZvpbYtoLrQlJMpNU6sReOSJmdmL2mhsv7ZewJUERCTjCcvAvA1TZ83Hpd1AIE93Aw11KcFFf98nczp36n0H2lZKPgGPtnlYBy6DGJvfx7Ua+OteUOE2EbLZO3Pj2FyjyJcXJMPuFb9Lc41AtXhbZjyAF8d9P/GGsPj/Re8N2ojXoFEk65G/ATHElAi0KLmD+fOxhpvCgM1oMPHtITgGGDt4+m2/b3wm2saGzJwLH/LKTp7u28QpG+8l1zla7vEi87c3uQgAVIx5K5tx4gwSPM1hncoOzqhydPp+dL7RHTrwffb+sf8yTE6dxj8rP1Pi18gsvceDpRRKtFzhhFVr9J8jDL79O7+MOEEy4e0NrEVik6N28wno8Pr1nR7HIt/r2HE6yyuDwmJvdXqh/13SQfmZrmkLwRqutC7YJ4xNaPKFY3Hg8BxGe4WqW9IpKAFCE1tHABP7CTd4gIiKjFOvH8jgsJJnaLsCahHjao6l15DwvNzx5YvHhqlHxdR2PifNJUB0NbgrHvAprRfpivJQCTAPZHCM8/WUJFcSn7T5TJwQCFiCdEmImqtzSAAAAA=");
$acrylic-noise-dark: url("data:image/webp;base64,UklGRlYFAABXRUJQVlA4TEoFAAAvMUAMEIUEY9tC2xpukl+S/JIkv1+SJEnSdPc+59w7gogCMWzbNswFbedJ9g2DHWOP21wOwiZWXXv1TDyAYlkZw8hk+hkbg3WMTO9WcLsGbn7Ncwu4fozEMKesO0yV2xMTnPLOoE3ZFkAWZ01RTA7YsrZFrs778ER0N7GcWmN6okU/HlTylK8pYAsnOtqoXGvNAbdr0ouRIWMPXG9PupSapx+WVjTLZF+DyteO1v1Iz3ir7ln22AU3Rh6i9nFdCrRX9nw9nsE0drhPknAT0+v7klkYdczCCSsvRB+GjpEwdhWicjOYVENhZKB41epbrWBe3bIIe97VS+1rZzFFYS+T886di+OXA12/5hQzdAjXCcXxUtgSmMo8Q/pYWuljuozEeTrf9qim6+iKrUSeH8d7sSyj+mluJ919k3Mg7ZBllK38lx+BEtkjkivZrRSgScI9JCoTRbQZZbO9QYyWzYJT8bYr7FJG+Opo1wA7FI9PgaJ0gxYjUE/LRzlab35Te9yb8nbgeOlmp6iaY5PGhWBzAK7ZMia5D8C8Z/LASc2HpcIGMx+Rx6ZXW5nsOz7P/Sas5hzTk2WMhK8IctJVVt5o/ffvCtUWwHSHsyzH7ksDqAPzDuFmPBspmJfLe0wQ0jEQoSHlS+pNLNs6trsn33qwue3GYEE4EdasXKQZejfdjuIVjewF4Pg8qMS6Mlh701W6deBninsy9748++xqisrz9cE0ZdtTiaiNhe6djtM/LgS5Kw580wpBzns9bKuEj5wsabD02PpSUgo9t2a79kfoltrJlOU+oCPKMt58s26p7BFZjOdamyzE1tNicHXPUd7pxX4mOck4hmMOiiuKUGb6wcdApUKrOVu2rtWNAQ3KV5K0VxfNIUl+jUk8bxJi0EClZdNjwvmsXtaq7yRpaRZnLcHaACaj4xv7+JVD0/dHNaQGn0my89nOYhkapLJ6tc7gblqotnN4mmP50hHrzySL/F1HnoLVdI0hoLUZxTf5pIWPHPH8Sv4aSGVgUmFNbd6RaV2ZeWe05fZSo8mvj1yVanj8yJG/XLb9uOpMfcIF5au2r0c9WklxjCiTctIEuzDqXNWny3y+prjvYxvnbDUxTu2OV3ZRX6p+uEzVL5fBaTF2e+xSpDsnTg2Y4WK22maP5Lz+1WWx6+j+agRoYcfYfndZjC4eiKdjAP+MO8WdZanWt/xAJEXfLoufrI+gt0sTxhAluF68dQnEK7gq7VW8d4ifLusqRctmGq36hToKvljDGmG7+TqLNlwijM/lKj9dhs6s2rPW5/Qast4uRa96kLEiq6CU1LEo7LTIEbLPmMvyYx/IdpTiVOJUwIDyc7c7ayhSe4p7lPU+atOWYaGDNxQ6QTz67fgjNkYmWeV4c+vzgc38CzZR1pFUcMslM9NButfM+rRW5qs283EeTnq7ZMrj4V9Jamor/KxNKW8Ie0hLr4f+ZNbSpR5vG8hjVSP9nSXQZi75szYPThov3Le/NOG3TxSOA/d82q9JN0d/Rfgn5WdtdhHyTinq7EfxTiabnZty751PHXHU5FVoeB7fdnPnsfhImwo2ZQEMxvfXCeBz+oH1/tqk51x9m6G2+39Vn4LZyad28lyk3crS/ptQ9WjT5xoiVK57RbjIZtTuK2xb1Tb0DkPu8uKRScWqArvUg7mleet2XDBqOJYDd+A51HI4X8RDfUit0hSzwQoVwnXiX1fTiVqydyo6NbT7Wgu3XCxUuyzL6GFruKF0Jxf6ku9GOJglrQaV9+daSOQNe3o+tQZpu46j9ADMqh88knMhWPEWNCCjzSgb");
$acrylic-blend-mode: overlay;

.card {
    display: flex;
    flex-direction: column;
    border-radius: $border-radius;
    background-color: light-dark($background-color, $background-color-dark);
    
    &:not(.clear) {
        @include shadow.box(2);
    }
    @each $color in color.$names {
        &.#{"" + $color} {
            background-color: light-dark(map.get(color.$backgrounds, $color), map.get(color.$backgrounds-dark, $color));
            color: light-dark(map.get(color.$foregrounds, $color), map.get(color.$foregrounds-dark, $color));
        }
    }

    &.same-height {
        height: 100%;
        .card-body {
            justify-content: end;
        }
    }

    &.clear {
        background-color: transparent;
    }
    &.round {
        border-radius: $border-radius-round;
    }

    &.background-card {
        background-color: light-dark(color.$canvas-background, color.$canvas-background-dark);
    }

    &.canvas-background-card {
        background-color: light-dark(
            sassColor.mix(rgba(color.$canvas-background, 0.6), $background-transparent-color),
            sassColor.mix(rgba(color.$canvas-background-dark, 0.333), $background-transparent-color-dark));
        @include shadow.box(3);
        &:not(.suppress-canvas-card-animation) {
            animation: appear-on-page animation.$duration-lg ease-out;
        }
    }

    &.selectable-card {
        cursor: pointer;
        &:hover {
            background-color: light-dark($hover-background-color, $hover-background-color-dark);
            @include shadow.box(4);
        }
    }

    &.canvas-card {
        background-color: light-dark($background-transparent-color, $background-transparent-color-dark);
        &:not(.suppress-canvas-card-animation) {
            animation: appear-on-page animation.$duration-lg ease-out;
        }

        @each $color in color.$names {
            &.#{"" + $color} {
                background-color: light-dark(rgba(map.get(color.$backgrounds, $color), 0.667), rgba(map.get(color.$backgrounds-dark, $color), 0.333));
                color: light-dark(map.get(color.$foregrounds, $color), map.get(color.$foregrounds-dark, $color));
            }
        }
        &.selectable-card:hover {
            background-color: light-dark($hover-background-transparent-color, $hover-background-transparent-color-dark);
        }
    }

    .card-footer {
        margin-top: auto;
        display: flex;
        justify-content: space-between;
        grid-column-gap: 0.75rem;
        border-top: $divider;
        border-top-color: light-dark($divider-color, $divider-color-dark);
        padding: 1rem 1.5rem;
        &.center {
            justify-content: center;
        }
        & > * {
            &:only-child {
                margin: 0 auto;
            }
        }
    }

    .card-body {
        @extend .gap-3;
        &.sparse { @extend .gap-5; }
        &.dense { @extend .gap-1; }
        padding: 1rem;
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        &.row { flex-direction: row; }
        box-sizing: border-box;
    }

    .background-card-body {
        @extend .card-body;
        @extend .gap-4;
    }
}

.acrylic {
    -webkit-backdrop-filter: $acrylic-blur;
    backdrop-filter: $acrylic-blur;
    background-image: light-dark($acrylic-noise, $acrylic-noise-dark);
    background-blend-mode: $acrylic-blend-mode;
}

.acrylic-card {
    @extend .dropdown-box-shadow;
    @extend .acrylic;
    margin: 0;
    padding: 0.25rem;
    border-radius: $border-radius;
    gap: 0.25rem;
    border: 1px solid light-dark(color.$canvas-border, color.$canvas-border-dark);
    background-color: light-dark(
        rgba($background-color, 0.5),
        rgba($background-color-dark, 0.75));
}

.divider-border-top {
    border-top: $divider;
    border-top-color: light-dark($divider-color, $divider-color-dark);
}
.divider-border-left {
    border-left: $divider;
    border-left-color: light-dark($divider-color, $divider-color-dark);
}
.divider-border-right {
    border-right: $divider;
    border-right-color: light-dark($divider-color, $divider-color-dark);
}
.divider-border-bottom {
    border-bottom: $divider;
    border-bottom-color: light-dark($divider-color, $divider-color-dark);
}

@keyframes appear-on-page {
    0% {
        opacity: 0.75;
        transform: translateY(0.5rem);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

hr {
    margin-top: 1rem 0 0 0;
    background: none;
    opacity: 1;
    border-top: $divider;
}
