<div class="header row no-wrap items-center">
    <div class="full-height full-width first-handle row no-wrap">
        @if (windowService.backUrl(); as url) {
            <app-back-button [url]="url"/>
        }
        <div class="handle full-width items-center row no-wrap gap-5 p-2 ps-0 ms-3">
            @if (!(windowService.backUrl() && windowService.isSmall())) {
                <img class="app-logo" title="logo" src="assets/img/logo/logo.svg"/>
            }
            <div class="app-name display-when-not-small small-text"
                [class.subtle-text]="!windowService.focused()">{{ 'APP_NAME' | translate }}</div>
        </div>
    </div>
    <div class="column full-width">
        <div class="handle height-2"></div>
        <app-omni-search class="pb-2"/>
    </div>
    <div class="row full-width full-height no-wrap items-center gap-1">
        <div class="handle full-width full-height items-center">
        </div>
        <app-presences class="me-2"/>
        <app-menu-button class="title-bar-margin" [class.icon-only]="!adminService.editMode()"
            [type]="adminService.editMode() ? 'primary' : 'subtle'" alignment="left">
            @if (adminService.editMode()) {
                <span button-text>{{ 'EDIT_MODE' | translate }}</span>
            }
            <div menu-content>
                <app-async-button class="left-aligned" icon="sign_out" type="subtle" [onClick]="signOut" hideSuccess>
                    {{ 'SIGN_OUT' | translate }}
                </app-async-button>
                @if (this.profileService.own()?.is_unit_admin) {
                    <div class="menu-item ms-3 gap-2 row no-wrap items-center">
                        <app-icon icon="edit" size="smaller"/>
                        <app-switch [value]="this.adminService.editMode()"
                            (valueChange)="this.adminService.editMode.set($event ?? false)"
                            class="ms--2" label="{{ 'ENABLE_EDIT_MODE' | translate }}"/>
                    </div>
                }
                <app-language-select/>
            </div>
        </app-menu-button>
    </div>
</div>
<div class="nav-and-canvas">
    <app-nav-bar [tabs]="tabs()" [horizontal]="windowService.isSmall()"/>
    <div class="canvas-container transparent-canvas-background">
        <div class="canvas">
            <app-page-router-outlet saveScrollPosition/>
        </div>
    </div>
</div>
